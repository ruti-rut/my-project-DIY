<div class="page-layout">

  @if (loading()) {
    <div class="loading-state">
      <mat-spinner diameter="50"></mat-spinner>
    </div>
  } @else {
    @let proj = project();
    @if (proj) {
      
      <!-- HEADER -->
      <app-project-header [projectInput]="proj"></app-project-header>

      <div class="content-grid">
        
        <!-- SIDEBAR: Materials -->
        <aside class="materials-card">
          <div class="card-header">
            <mat-icon>inventory_2</mat-icon> Supplies List
          </div>
          
          <div class="card-body">
            @if (getMaterialsLines().length > 0) {
              <ul class="checklist">
                @for (line of getMaterialsLines(); track line) {
                  <li>
                    <span class="check-dot"></span> {{ line }}
                  </li>
                }
              </ul>
            } @else {
              <p class="empty-msg">No supplies specified.</p>
            }
          </div>
        </aside>

        <!-- MAIN: Steps & Comments -->
        <main class="main-column">
          
          <!-- Steps -->
          <app-project-steps [steps]="proj.steps || []"></app-project-steps>

          <!-- Comments (Hidden on print) -->
          <div class="no-print">
            <app-project-comments [projectId]="proj.id"></app-project-comments>
          </div>
          
        </main>
      </div>

    } @else {
      <div class="error-msg">Project not found</div>
    }
  }
</div>