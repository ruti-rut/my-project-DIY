<div class="filters-bar">
  <!-- חיפוש -->
  <div class="search-wrapper">
    <mat-form-field appearance="outline" class="search-input" subscriptSizing="dynamic">
      <mat-icon matPrefix class="search-icon">search</mat-icon>
      <mat-label>Look for amazing projects...</mat-label>
      <input matInput [formControl]="searchControl" placeholder="e.g.: logo design, wooden furniture..." autocomplete="off">
      @if (searchControl.value) {
        <button mat-icon-button matSuffix (click)="clearSearch()" class="clear-search">
          <mat-icon>close</mat-icon>
        </button>
      }
    </mat-form-field>
  </div>

  <!-- קטגוריות – עם mat-chip-set (הדרך הנכונה!) -->
  <div class="categories-section">
    <span class="chips-label">categories:</span>
    
    <mat-chip-set>
      @for (cat of categories(); track cat.id) {
        <mat-chip-option
          [selected]="categoryControl.value?.includes(cat.id)"
          (click)="onCategoryToggle(cat.id)"
          class="category-chip">
          {{ cat.name }}
        </mat-chip-option>
      }
    </mat-chip-set>

    @if (categoryControl.value?.length) {
      <button mat-icon-button (click)="clearCategories()" class="clear-all-btn" matTooltip="נקה הכל">
        <mat-icon>clear_all</mat-icon>
      </button>
    }
  </div>

  <!-- מיון -->
  <div class="sort-wrapper">
    <mat-form-field appearance="outline" class="sort-select" subscriptSizing="dynamic">
      <mat-icon matPrefix>swap_vert</mat-icon>
      <mat-label>sort</mat-label>
      <mat-select [formControl]="sortControl">
        <mat-option value="newest"> new to old</mat-option>
        <mat-option value="oldest"> old to new</mat-option>
        <mat-option value="popular"> popular</mat-option>
      </mat-select>
    </mat-form-field>
  </div>
</div>