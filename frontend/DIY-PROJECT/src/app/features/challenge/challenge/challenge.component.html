<div class="page-container">
  
  <!-- Header Section -->
  <div class="arena-header">
    <div class="text-content">
      <h1 class="arena-title">The Arena</h1>
      <p class="arena-subtitle">Compete with the community, showcase your skills, and win.</p>
    </div>

    <!-- Modern "Pill" button instead of FAB for better visibility -->
    <a routerLink="/add-challenge" class="btn-host-challenge">
      <mat-icon>add</mat-icon>
      Host Challenge
    </a>
  </div>

  <!-- Loading State -->
  @if (loading) {
    <div class="loading-state">
      <mat-spinner diameter="40" class="custom-spinner"></mat-spinner>
      <p>Loading active battles...</p>
    </div>
  }

  <!-- Challenges Grid -->
  @if (!loading) {
    <div class="challenges-grid">
      @for (c of challenges; track c.id) {
        <div class="arena-card">
          
          <!-- Image Section with Overlay -->
          <div class="card-banner">
            <img [src]="getImageUrl(c.picture)" [alt]="c.theme" class="bg-image">
            <div class="status-badge">
              <span class="pulse-dot"></span> Live
            </div>
            <div class="overlay-gradient"></div>
          </div>

          <!-- Content Section -->
          <div class="card-body">
            <h3 class="card-title">{{ c.theme }}</h3>
            
            <div class="meta-row">
              <div class="meta-item">
                <mat-icon class="icon-clock">schedule</mat-icon>
                <span class="label">Ends:</span>
                <span class="value">{{ formatDate(c.endDate) }}</span>
              </div>
            </div>

            <div class="card-actions">
              <button mat-flat-button class="btn-enter" routerLink="/challenge/{{c.id}}">
                Enter Arena <mat-icon>arrow_forward</mat-icon>
              </button>
            </div>
          </div>
          
        </div>
      } @empty {
        <!-- Empty State -->
        <div class="empty-state">
          <div class="empty-icon-bg">
            <mat-icon>emoji_events</mat-icon>
          </div>
          <h3>The Arena is Quiet</h3>
          <p>No active challenges right now. Why not start one?</p>
          <button mat-stroked-button color="primary" routerLink="/add-challenge">Create Challenge</button>
        </div>
      }
    </div>
  }
</div>