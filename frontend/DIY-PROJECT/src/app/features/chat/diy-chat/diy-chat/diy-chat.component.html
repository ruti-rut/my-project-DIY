<!-- src/app/components/diy-chat/diy-chat.component.html -->
<div class="chat-container">

  <!-- Header -->
  <header class="header">
    <h1>Smart DIY Assistant</h1>
    <div class="header-buttons">
      <button class="btn-new" (click)="startNewChat()">New Chat</button>
      <button class="btn-logout" (click)="logout()">Log out</button>
    </div>
  </header>

  <!-- Messages Area -->
  <div class="messages-area" #scrollContainer>
    
    @if (messages().length === 0) {
      <div class="welcome">
        <p>Hello! Ask me any question about DIY projects, repairs, crafts, and handiwork.</p>
      </div>
    }

    @for (msg of messages(); track msg.timestamp) {
      <app-message-bubble [message]="msg"></app-message-bubble>
    }

    @if (isLoading()) {
      <div class="message assistant typing">
        <div class="bubble">
          <span class="dot"></span>
          <span class="dot"></span>
          <span class="dot"></span>
        </div>
      </div>
    }
  </div>

  <!-- Input Area -->
  <div class="input-area">
    <form (ngSubmit)="send()" class="input-form">
      <input 
        [(ngModel)]="newMessage"
        (keydown.enter)="handleEnter($event)"
        placeholder="How to build a shelf? How to fix a water leak?..."
        [disabled]="isLoading()"
        name="msg"
        autocomplete="off"
      />
      <button type="submit" [disabled]="!newMessage.trim() || isLoading()">
        Send
      </button>
    </form>
    <small class="hint">Shift + Enter for a new line</small>
  </div>
</div>