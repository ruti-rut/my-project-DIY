<div class="header-card">
  
  <!-- 1. Gradient Cover Banner -->
  <div class="cover-banner"></div>

  <!-- 2. Content Section -->
  <div class="header-content">
    
    <!-- Top Row: Avatar & Actions -->
    <div class="top-row">
      <!-- Avatar (Overlaps the banner) -->
      <div class="avatar-wrapper">
        @if (avatar().url) {
          <img [src]="avatar().url" alt="Profile" class="profile-img">
        } @else {
          <div class="profile-img placeholder" [style.background-color]="avatar().color">
            {{ avatar().initial }}
          </div>
        }
        
        <!-- Small Edit Button on the Avatar -->
        <button class="edit-avatar-btn" routerLink="/profile/edit">
          <mat-icon>edit</mat-icon>
        </button>
      </div>

      <!-- Action Buttons (Right side) -->
      <div class="actions">
        <button mat-stroked-button routerLink="/profile/edit">Edit Profile</button>
      </div>
    </div>

    <!-- User Info & Stats -->
    <div class="user-details">
      <h1 class="username">{{ profile()?.userName || 'Loading...' }}</h1>
      
      <p class="join-date">
        <mat-icon>calendar_today</mat-icon> 
        Member since {{ profile()?.joinDate ? formatDate(profile()!.joinDate) : '' }}
      </p>

      <!-- Stats Grid -->
      <div class="stats-grid">
        <div class="stat-box">
          <span class="value">{{ profile()?.projectsCount || 0 }}</span>
          <span class="label">Projects</span>
        </div>
        <div class="divider"></div>
        <div class="stat-box">
          <span class="value">{{ profile()?.favoritesCount || 0 }}</span>
          <span class="label">Favorites</span>
        </div>
      </div>

    </div>
  </div>
</div>