<!-- src/app/profile/edit-profile/edit-profile.component.html -->
<div class="edit-profile-page">
  <div class="card">
    <h1 class="title">Edit profile </h1>

    <div class="avatar-section">
      <img [src]="previewUrl()" alt="Profile picture " class="avatar-preview">
      <label for="avatar-input" class="change-photo-btn">
        <mat-icon>photo_camera</mat-icon>
       Change picture
      </label>
      <input
        type="file"
        id="avatar-input"
        accept="image/*"
        (change)="onFileSelected($event)"
        hidden>
    </div>

    <form [formGroup]="form" (ngSubmit)="save()" class="profile-form">

      <mat-form-field appearance="outline" class="full-width">
        <mat-label>שם משתמש</mat-label>
        <input matInput [value]="profile()?.userName" readonly>
        <mat-icon matSuffix>person</mat-icon>
      </mat-form-field>

      <mat-form-field appearance="outline" class="full-width">
        <mat-label>City / Region</mat-label>
        <input matInput formControlName="city" placeholder="e.g.: New York">
        <mat-icon matSuffix>location_on</mat-icon>
      </mat-form-field>

      <mat-form-field appearance="outline" class="full-width">
        <mat-label>About me </mat-label>
        <textarea
          matInput
          formControlName="aboutMe"
          rows="6"
          placeholder="Introduce yourselves to the community, and let us know what you like to build..."></textarea>
      </mat-form-field>

      <div class="actions">
        <button type="button" mat-stroked-button (click)="cancel()" [disabled]="loading()">
          Cancel
        </button>
        <button
          type="submit"
          mat-raised-button
          color="primary"
          [disabled]="form.invalid || loading()">
          @if (loading()) {
            <mat-spinner diameter="20"></mat-spinner>
          } @else {
           Save Changes
          }
        </button>
      </div>
    </form>
  </div>
</div>