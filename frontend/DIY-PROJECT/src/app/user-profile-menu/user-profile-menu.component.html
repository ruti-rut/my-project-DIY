<button mat-button [matMenuTriggerFor]="userMenu" class="user-menu-trigger">
  
  @if (user.profilePicturePath) {
    <img [src]="user.profilePicturePath" alt="פרופיל" class="user-avatar">
  } @else {
    <div 
      class="initials-avatar" 
      [style.backgroundColor]="generateColor(user.userName)">
      {{ getFirstInitial(user.userName) }}
    </div>
  }
  
  <span class="username">{{ user.userName }}</span>
  <mat-icon>expand_more</mat-icon>
</button>

<mat-menu #userMenu="matMenu" xPosition="before">
  
  <div class="user-menu-header">
    <strong>{{ user.userName }}</strong>
    <small>{{ user.mail }}</small>
  </div>
  <mat-divider></mat-divider>
  <a mat-menu-item routerLink="/profile">
    <mat-icon color="primary">account_circle</mat-icon>
    <span>הפרופיל שלי</span>
  </a>
  

  <a mat-menu-item routerLink="/profile/my-projects">
    <mat-icon>workspaces</mat-icon>
    <span>הפרויקטים שלי</span>
  </a>

  <mat-divider></mat-divider>
  
  <button mat-menu-item (click)="logout()">
    <mat-icon>logout</mat-icon>
    <span>התנתק</span>
  </button>
</mat-menu>