<div class="card-container" routerLink="/projects/{{ project.id }}">
  
  <!-- Image Area -->
  <div class="image-wrapper">
    <img 
      [src]="getImageUrl()" 
      [alt]="project.title"
      (error)="onImageError($event)"
      class="project-image"
      loading="lazy">
    
    <!-- Gradient Overlay for text readability if needed -->
    <div class="hover-overlay"></div>
  </div>

  <!-- Content -->
  <div class="card-body">
    <h3 class="card-title" [title]="project.title">{{ project.title }}</h3>
  </div>

  <!-- Footer -->
  <div class="card-footer">
    <!-- User Info -->
    <div class="user-info">
      @if (avatar().url) {
        <img [src]="avatar().url" class="mini-avatar" alt="avatar">
      } @else {
        <div class="mini-avatar placeholder" [style.background-color]="avatar().color">
          {{ avatar().initial }}
        </div>
      }
      <span class="username">{{ project.usersSimpleDTO.userName || 'Anonymous' }}</span>
    </div>

    <!-- Action Buttons -->
    <div class="social-actions" (click)="$event.stopPropagation()">
      <app-like-button 
        [projectId]="project.id"
        [isLiked]="project.liked || false"
        (toggled)="toggleLiked($event)">
      </app-like-button>

      <app-favorite-button 
        [projectId]="project.id"
        [isFavorited]="project.favorited || false"
        (toggled)="toggleFavorite($event)">
      </app-favorite-button>
    </div>
  </div>
</div>