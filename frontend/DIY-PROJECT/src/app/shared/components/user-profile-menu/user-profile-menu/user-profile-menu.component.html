<button mat-button [matMenuTriggerFor]="userMenu" class="user-menu-trigger">
  
  @if (user.profilePicture) {
    <img [src]="'data:image/jpeg;base64,' + user.profilePicture" alt="פרופיל" class="user-avatar">
  } @else {
    <div 
      class="initials-avatar" 
      [style.backgroundColor]="generateColor(user.userName)">
      {{ getFirstInitial(user.userName) }}
    </div>
  }
  
  <span class="username">{{ user.userName }}</span>
  <mat-icon>expand_more</mat-icon>
</button>
<mat-menu #userMenu="matMenu" xPosition="before">

  <div class="user-menu-header">
    <strong>{{ user.userName }}</strong>
    <small>{{ user.mail }}</small>
  </div>
  <mat-divider></mat-divider>
  <a mat-menu-item routerLink="/profile">
    <mat-icon color="primary">account_circle</mat-icon>
    <span>My profile</span>
  </a>


  <mat-divider></mat-divider>

  <button mat-menu-item (click)="logout()">
    <mat-icon>logout</mat-icon>
    <span>Log out</span>
  </button>
</mat-menu>