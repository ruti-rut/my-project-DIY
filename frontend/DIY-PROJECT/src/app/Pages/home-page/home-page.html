<div class="home-master-container">

  <!-- ◊ú◊ï◊ì◊® -->
  @if (isLoading) {
    <div class="loader">
      <mat-spinner diameter="60"></mat-spinner>
      <p>Loading home page...</p>
    </div>
  } @else {

    <!-- ◊ê◊™◊í◊®◊ô◊ù ◊§◊™◊ï◊ó◊ô◊ù -->
    <section class="section">
      <h2 class="section-title">Open Challenges üèÜ</h2>

      <div class="cards-grid">
        @for (c of challengeMap; track c.id) {
          <mat-card class="challenge-card" [routerLink]="'/challenge/' + c.id">
            <img mat-card-image [src]="getImageUrl(c.picture)" [alt]="c.theme" class="challenge-img">

            <mat-card-content class="challenge-content">
              <h3 class="challenge-title">{{ c.theme }}</h3>
              <p class="challenge-date">
                <mat-icon>event</mat-icon>
                Ending: {{ formatDate(c.endDate) }}
              </p>
            </mat-card-content>

            <mat-card-actions class="challenge-actions">
              <button mat-raised-button color="primary" class="full-btn">
                <mat-icon>arrow_forward</mat-icon>
                Details and participating
              </button>
            </mat-card-actions>
          </mat-card>
        }
      </div>
    </section>

    <!-- ◊§◊®◊ï◊ô◊ß◊ò◊ô◊ù ◊ê◊ó◊®◊ï◊†◊ô◊ù -->
    <section class="section">
      <h2 class="section-title">Latest Projects üõ†Ô∏è</h2>

      @for (categoryGroup of projectsMap; track categoryGroup.key) {
        <h3 class="category-title">{{ getCategoryName(categoryGroup.key) }}</h3>

        <div class="cards-grid">
          @for (project of categoryGroup.value; track project.id) {
            <app-project-card [project]="project"></app-project-card>
          }
        </div>
      }
    </section>

  }
</div>