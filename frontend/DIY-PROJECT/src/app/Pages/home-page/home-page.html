@if (isLoading) {
  <div class="loading-spinner">
    <mat-spinner diameter="50"></mat-spinner>
    <p>Loading home data...</p>
  </div>
} @else if (homeData) {
  
  <section class="challenges-section">
    <h2>Open Challenges üèÜ</h2>
    
    <!-- @if (homeData.latestChallenges.length > 0) { -->
        <div class="challenges-grid">
            @for (c of challengeMap; track c.id) {
                <mat-card class="challenge-card">
                    
                    <img 
                        [src]="getImageUrl(c.picturePath)" 
                        [alt]="c.theme"
                        class="challenge-image">

                    <mat-card-content class="card-content">
                        <h3 class="challenge-title">{{ c.theme }}</h3>
                        <p class="challenge-date">
                            <mat-icon>event</mat-icon>
                            Ending at: {{ formatDate(c.endDate) }}
                        </p>
                    </mat-card-content>

                    <mat-card-actions>
                        <button mat-raised-button color="primary" routerLink="/challenge/{{c.id}}">
                            <mat-icon>arrow_forward</mat-icon>
                            Details
                        </button>
                    </mat-card-actions>
                </mat-card>
            } 
        </div>
    <!-- } @else {
        <div class="empty">
            <mat-icon>flag</mat-icon>
            <h3>No active challenges right now</h3>
            <p>Check back soon!</p>
        </div>
    } -->
  </section>

  <hr>

  <section class="projects-section">
    <h2>Latest Projects üõ†Ô∏è</h2>
    
    @for (categoryGroup of projectsMap; track categoryGroup.key) {
      
        <h3>{{ getCategoryName(categoryGroup.key) }}</h3> 
        
        <mat-grid-list [cols]="4" rowHeight="380px" gutterSize="16px"> 
          @for (project of categoryGroup.value; track trackById($index, project)) {
            <mat-grid-tile>
              <app-project-card [project]="project"></app-project-card>
            </mat-grid-tile>
          }
        </mat-grid-list>
        <hr>
    }
  </section>
}
